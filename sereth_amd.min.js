!function(e){function o(e){return l[e]||(l[e]=new Promise(function(o,n){f[e]=o})),l[e]}function n(e){return e?"function"==typeof e.map?Promise.all(e.map(o)):Promise.all([o(e)]):n([])}function i(e,o){var n=l[e],i=f[e];if(n){if(!i)throw u;i.call(n,o),delete f[e]}else l[e]=Promise.resolve(o)}if(!e.use_modules&&!e.def_module){if(!Promise)throw"Promise required";var t="Missing callback",u="Module exists";e.use_modules=function(o,i){if("function"!=typeof i)throw t;n(o).then(function(o){i.apply(e,o)})},e.def_module=function(o,n,u){var f=null;if("function"==typeof n?u=n:f=n,"function"!=typeof u)throw t;e.use_modules(f,function(n){i(o,u.apply(e,n))})};var f={},l={}}}(this);