!function(e){function n(e){return r[e]||(r[e]=new Promise(function(n,o){f[e]=n})),r[e]}function o(e){return e?e.map?Promise.all(e.map(n)):Promise.all([n(e)]):o([])}function i(e,n){var o=r[e],i=f[e];if(o){if(!i)throw u+e;i.call(o,n),delete f[e]}else r[e]=Promise.resolve(n)}if(!Promise)throw"Promise required";var t="Callback must be a function ",u="Module exists: ";e.use_modules=function(n,i){if("function"!=typeof i)throw t;o(n).then(function(n){i.apply(e,n)})},e.define_module=function(n,o,u){var f=null;if("function"==typeof o?u=o:f=o,"function"!=typeof u)throw t;e.use_modules(f,function(o){i(n,u.apply(e,o))})};var f={},r={}}(this);
