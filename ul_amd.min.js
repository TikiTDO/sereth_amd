!function(e){function n(e){return f[e]||(f[e]=new o(function(n){r[e]=n})),f[e]}function i(e){return e?Array.isArray(e)?o.all(e.map(n)):o.all([n(e)]):i([])}if(!o)throw"Promise required";if(!e.ul_amd){e.ul_amd=1;var o=e.Promise,t="function",l="Missing callback",u="Module exists",r={},f={};e.use_module=function(n,o){if(typeof o!=t)throw l;i(n).then(function(n){o.apply(e,n)})},e.def_module=function(n,i,a){var c=null;if(typeof i==t?a=i:c=i,typeof a!=t)throw l;e.use_module(c,function(i){var t=a.apply(e,i);if(f[n]){if(!r[n])throw u;r[n].call(f[n],t),delete r[n]}else f[n]=o.resolve(t)})}}}(this);